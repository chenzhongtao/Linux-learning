linux 内存管理
===============================


X86-64 保护模式
-------------------------

寻址方式
--------------------------------
在保护模式下cpu发出的是线性地址， MMU根据CR3 Register指向的页表
讲线性地址转换为物理地址.

线性地址本身分为很多字段，每一段都是页表中的选择子。
* 4级页表
    47 39-9bit PageMap MPL4T
    38 30-9bit Page Directory Pointer
    29 21-9bit Page Table Selector
    20 12-9bit Page Table Entry
    11 0-12bit 页内字节寻址

    64位体系中只实现了48位的虚拟地址。 高16位被用在符号扩展，要么都是0，要么都是1 (Qus. 为啥??)
    普通页的大小为4k， 但是一个地址为64bit。 所以一个页中能有512项内容, 由于2^9 = 512，
    所以可以看到线性地址中前四级页表选择子的宽度都是9bit, 因为美级页表都要对齐,都是4k大小

    由于48bit的线性地址，用9bit来划分，所以分为了4x9=36 + 11. 为4级页表，32是2级

* 可选的其他转换方式
   根据物理页的大小划分
    2M =4 k * 512 页表转换 PML4T +  PDPT + PDT | 21 为的页内指针 
    1G = 

* 最大可寻址范围
   使用 MAXPHYADDR 宏定义主要由
   36bit 40bit 52bit
